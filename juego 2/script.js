let temporizador;
let tiempoRestante = 1800; // 30 minutos
let juegoIniciado = false;
let verificarPresionado = 0;

const estructura = [
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "p", "r", "o", "p", "a", "g", "a", "n", "d", "a", "y", "p", "u", "b", "l", "i", "c", "i", "d", "a", "d", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "m", "e", "r", "c", "a", "d", "o", "t", "e", "c", "n", "i", "a", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "b", "", "", "", "", "", "", "j", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "", "", "p", "a", "p", "e", "l", "e", "r", "i", "a", "y", "u", "t", "i", "l", "e", "s", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "c", "", "", "i", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "l", "", "a", "n", "t", "i", "c", "i", "p", "o", "a", "p", "r", "o", "v", "e", "e", "d", "o", "r", "e", "s", "", "c", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "i", "", "", "v", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "u", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "e", "", "d", "e", "p", "o", "s", "i", "t", "o", "s", "e", "n", "g", "a", "r", "a", "n", "t", "i", "a", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "n", "", "", "r", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "v", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "t", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "e", "n", "e", "t", "a", "p", "a", "s", "p", "r", "e", "o", "p", "e", "r", "a", "t", "i", "v", "a", "s", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "e", "q", "u", "i", "p", "i", "d", "e", "r", "e", "p", "a", "r", "t", "o", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "s", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "i", "n", "v", "e", "r", "s", "i", "o", "n", "e", "s", "p", "e", "r", "m", "a", "n", "e", "n", "t", "e", "s", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "p", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "s", "", "", "", "", "", "d", "e", "u", "d", "o", "r", "e", "s", "d", "i", "v", "e", "r", "s", "o", "s", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "r", "", "", "", "", "e", "", "", "", "", "", "", "c", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "e", "d", "i", "f", "i", "c", "i", "o", "s", "", "", "", "", "", "", "", "", "", "e", "", "c", "", "", "", "", "q", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "o", "", "", "", "", "u", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "b", "", "", "", "", "i", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "m", "o", "b", "i", "l", "i", "a", "r", "i", "o", "y", "e", "q", "u", "i", "p", "o", "", "", "s", "", "r", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "o", "r", "g", "a", "n", "i", "z", "a", "c", "i", "o", "n", "", "", "", "", "", "", "", "", "", "", "p", "r", "i", "m", "a", "s", "d", "e", "s", "e", "g", "u", "r", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "l", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "c", "", "", "", "", "", "", "m", "e", "r", "c", "a", "n", "c", "i", "a", "s", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "c", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "i", "n", "t", "e", "r", "e", "s", "e", "s", "p", "a", "g", "a", "d", "o", "s", "p", "o", "r", "a", "n", "t", "i", "c", "i", "p", "a", "d", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "u", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "i", "n", "s", "t", "a", "l", "a", "c", "i", "o", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],

];

const respuestas = [
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "p", "r", "o", "p", "a", "g", "a", "n", "d", "a", "y", "p", "u", "b", "l", "i", "c", "i", "d", "a", "d", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "m", "e", "r", "c", "a", "d", "o", "t", "e", "c", "n", "i", "a", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "b", "", "", "", "", "", "", "j", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "", "", "p", "a", "p", "e", "l", "e", "r", "i", "a", "y", "u", "t", "i", "l", "e", "s", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "c", "", "", "i", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "l", "", "a", "n", "t", "i", "c", "i", "p", "o", "a", "p", "r", "o", "v", "e", "e", "d", "o", "r", "e", "s", "", "c", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "i", "", "", "v", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "u", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "e", "", "d", "e", "p", "o", "s", "i", "t", "o", "s", "e", "n", "g", "a", "r", "a", "n", "t", "i", "a", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "n", "", "", "r", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "v", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "t", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "e", "n", "e", "t", "a", "p", "a", "s", "p", "r", "e", "o", "p", "e", "r", "a", "t", "i", "v", "a", "s", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "e", "q", "u", "i", "p", "i", "d", "e", "r", "e", "p", "a", "r", "t", "o", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "s", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "i", "n", "v", "e", "r", "s", "i", "o", "n", "e", "s", "p", "e", "r", "m", "a", "n", "e", "n", "t", "e", "s", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "p", "", "", "", "", "", "", "", "", "", "", "", "g", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "s", "", "", "", "", "", "d", "e", "u", "d", "o", "r", "e", "s", "d", "i", "v", "e", "r", "s", "o", "s", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "t", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "r", "", "", "", "", "e", "", "", "", "", "", "", "c", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "e", "d", "i", "f", "i", "c", "i", "o", "s", "", "", "", "", "", "", "", "", "", "e", "", "c", "", "", "", "", "q", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "o", "", "", "", "", "u", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "b", "", "", "", "", "i", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "", "", "m", "o", "b", "i", "l", "i", "a", "r", "i", "o", "y", "e", "q", "u", "i", "p", "o", "", "", "s", "", "r", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "n", "", "", "", "", "", "", "", "r", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "a", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "o", "r", "g", "a", "n", "i", "z", "a", "c", "i", "o", "n", "", "", "", "", "", "", "", "", "", "", "p", "r", "i", "m", "a", "s", "d", "e", "s", "e", "g", "u", "r", "o", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "l", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "e", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "c", "", "", "", "", "", "", "m", "e", "r", "c", "a", "n", "c", "i", "a", "s", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "c", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "i", "", "", "", "", "", "", "", "s", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "m", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "i", "n", "t", "e", "r", "e", "s", "e", "s", "p", "a", "g", "a", "d", "o", "s", "p", "o", "r", "a", "n", "t", "i", "c", "i", "p", "a", "d", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "p", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "d", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "u", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "g", "a", "s", "t", "o", "s", "d", "e", "i", "n", "s", "t", "a", "l", "a", "c", "i", "o", "n", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "o", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
  ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
];

// NÃºmeros de pistas (fila-columna : nÃºmero)
const numerosPistas = {
// Horizontales
"3-20": 1,  
"6-23":4,    
"8-20": 8,   
"10-20": 9,   
"13-18": 10,    
"15-20": 11,
"17-27": 13,
"19-21": 14,
"22-20": 15,
"24-10": 16,
"26-20": 17,
"29-1": 18,
"31-35": 20,
"24-40": 21,
"12-34": 23,
"2-44": 24,


// Verticales
"3-31": 2,    
"5-24": 3,    
"6-41": 5,    
"7-18": 6,
"7-21": 7, 
"15-39": 12,
"6-13": 19,
"18-46": 22,
"1-53": 25,
};

const tabla = document.getElementById("crucigrama");
let inputs = [];

estructura.forEach((fila, i) => {
  const tr = document.createElement("tr");
  let filaInputs = [];
  fila.forEach((celda, j) => {
    const td = document.createElement("td");
    td.style.position = "relative"; // Para que el numerito se posicione bien

    if (celda !== "") {
      const input = document.createElement("input");
      input.setAttribute("maxlength", 1);
      input.dataset.row = i;
      input.dataset.col = j;
      input.disabled = true;

      filaInputs.push(input);

      // Colocar el numerito si corresponde
      const key = `${i}-${j}`;
      if (numerosPistas[key]) {
        const numero = document.createElement("div");
        numero.textContent = numerosPistas[key];
        numero.style.position = "absolute";
        numero.style.top = "1px";
        numero.style.left = "2px";
        numero.style.fontSize = "6px";
        numero.style.fontWeight = "bold";
        numero.style.color = "#555";
        td.appendChild(numero);
      }

      td.appendChild(input);

      input.addEventListener("keydown", function (e) {
        if (e.key.length === 1 && !/[a-zÃ±]/i.test(e.key)) {
          e.preventDefault();
          return;
        }

        if (["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].includes(e.key)) {
          e.preventDefault();
          navegarEntreCeldas(e.key, i, j);
        }

        if (e.key === "Enter") {
          verificarRespuestas();
        }

        if (e.key.length === 1 && /[a-zÃ±]/i.test(e.key)) {
          setTimeout(() => {
            const nextInput = document.querySelector(
              `input[data-row="${i}"][data-col="${j + 1}"]`
            );
            if (nextInput) nextInput.focus();
          }, 10);
        }
      });
    } else {
      td.classList.add("celda-vacia");
      filaInputs.push(null);
    }

    tr.appendChild(td);
  });
  inputs.push(filaInputs);
  tabla.appendChild(tr);
});

function navegarEntreCeldas(direccion, filaActual, colActual) {
  let nuevaFila = filaActual;
  let nuevaCol = colActual;

  switch (direccion) {
    case "ArrowUp": nuevaFila = Math.max(0, filaActual - 1); break;
    case "ArrowDown": nuevaFila = Math.min(estructura.length - 1, filaActual + 1); break;
    case "ArrowLeft": nuevaCol = Math.max(0, colActual - 1); break;
    case "ArrowRight": nuevaCol = Math.min(estructura[filaActual].length - 1, colActual + 1); break;
  }

  if (inputs[nuevaFila] && inputs[nuevaFila][nuevaCol]) {
    inputs[nuevaFila][nuevaCol].focus();
  }
}

function iniciarJuego() {
  if (juegoIniciado) return;
  juegoIniciado = true;
  verificarPresionado = 0;

  document.querySelectorAll("input").forEach(input => {
    input.disabled = false;
  });

  temporizador = setInterval(() => {
    if (tiempoRestante <= 0) {
      clearInterval(temporizador);
      verificarRespuestas(true);
      document.querySelectorAll("input").forEach(input => input.disabled = true);
    } else {
      tiempoRestante--;
      actualizarTemporizador();
    }
  }, 1000);
}

function actualizarTemporizador() {
  const minutos = Math.floor(tiempoRestante / 60).toString().padStart(2, "0");
  const segundos = (tiempoRestante % 60).toString().padStart(2, "0");
  document.getElementById("tiempo").textContent = `${minutos}:${segundos}`;
}

function verificarRespuestas(final = false) {
  verificarPresionado++;

  let correcto = true;
  let correctas = 0;
  const inputsLista = Array.from(document.querySelectorAll("input"));

  inputsLista.forEach(input => {
    const row = input.dataset.row;
    const col = input.dataset.col;
    const letra = input.value.toLowerCase();
    if (letra === respuestas[row][col]) {
      correctas++;
    } else {
      correcto = false;
    }
  });

  inputsLista.forEach(input => {
    const row = input.dataset.row;
    const col = input.dataset.col;
    const letra = input.value.toLowerCase();

    if (letra !== respuestas[row][col]) {
      input.classList.add("celda-incorrecta");
      input.classList.remove("celda-correcta");
    } else {
      input.classList.add("celda-correcta");
      input.classList.remove("celda-incorrecta");
    }
  });

  const mensaje = document.getElementById("mensaje");

  if (verificarPresionado >= 2 || final) {
    clearInterval(temporizador);
    document.querySelectorAll("input").forEach(input => input.disabled = true);
    mensaje.textContent = `âœ… Juego finalizado. Respuestas correctas: ${correctas}`;
    verificarPresionado = 0;
  } else {
    mensaje.textContent = correcto ? "ðŸŽ‰ Â¡Correcto!" : "âŒ Algunas respuestas estÃ¡n incorrectas. Vuelve a verificar para finalizar.";
  }
}

function reiniciarCrucigrama() {
  clearInterval(temporizador);
  juegoIniciado = false;
  tiempoRestante = 1800;
  verificarPresionado = 0;
  actualizarTemporizador();

  document.querySelectorAll("input").forEach(input => {
    input.value = "";
    input.classList.remove("celda-correcta", "celda-incorrecta");
    input.disabled = true;
  });

  document.getElementById("mensaje").textContent = "";





  /*reglasssssss*/

  // Control del modal de reglas
const modal = document.getElementById("modalReglas");
const btn = document.getElementById("btnReglas");
const span = document.getElementsByClassName("cerrar")[0];

btn.onclick = function() {
  modal.style.display = "block";
}

span.onclick = function() {
  modal.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}



}

// Hacemos accesibles las funciones para el HTML
window.iniciarJuego = iniciarJuego;
window.verificarRespuestas = verificarRespuestas;
window.reiniciarCrucigrama = reiniciarCrucigrama;